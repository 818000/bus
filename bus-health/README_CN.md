# ğŸ¥ Bus Health: è·¨å¹³å°ç³»ç»Ÿå¥åº·ç›‘æ§æ¡†æ¶

<p align="center">
<strong>è·¨å¹³å°ã€é«˜æ€§èƒ½çš„ç³»ç»Ÿå¥åº·ç›‘æ§è§£å†³æ–¹æ¡ˆ</strong>
</p>

-----

## ğŸ“– é¡¹ç›®ä»‹ç»

**Bus Health** æ˜¯åŸºäº OSHIï¼ˆOperating System and Hardware Informationï¼‰çš„è·¨å¹³å°ç³»ç»Ÿå¥åº·ç›‘æ§æ¡†æ¶ã€‚å®ƒä¸º Windowsã€Linuxã€macOS å’Œ Unix ç³»ç»Ÿæä¾›äº†ç»Ÿä¸€çš„ API æ¥ç›‘æ§ç³»ç»Ÿå’Œç¡¬ä»¶ä¿¡æ¯ã€‚è®¾è®¡ç®€æ´ã€æ€§èƒ½ä¼˜å…ˆ,ä½¿å¼€å‘è€…èƒ½å¤Ÿè½»æ¾è·å–å…¨é¢çš„ç³»ç»Ÿå¥åº·æŒ‡æ ‡,æ— éœ€æ‹…å¿ƒåº•å±‚å¹³å°å·®å¼‚ã€‚

-----

## âœ¨ æ ¸å¿ƒç‰¹æ€§

### ğŸ¯ å¹³å°æ”¯æŒ

* **è·¨å¹³å°**: æ”¯æŒ Windowsã€Linuxã€macOSã€Unix(Solarisã€FreeBSDã€AIXã€OpenBSD)
* **ç»Ÿä¸€ API**: æ‰€æœ‰å¹³å°ä½¿ç”¨å•ä¸€æ¥å£,æ— éœ€ç¼–å†™å¹³å°ç‰¹å®šä»£ç 
* **é›¶é…ç½®**: å¼€ç®±å³ç”¨,è‡ªåŠ¨æ£€æµ‹å¹³å°

### âš¡ ç³»ç»Ÿä¿¡æ¯ç›‘æ§

| ç±»åˆ« | åŠŸèƒ½ | æè¿° |
| :--- | :--- | :--- |
| **CPU** | ä½¿ç”¨ç‡ã€è´Ÿè½½ã€æ—¶é’Ÿ | å®æ—¶ CPU è´Ÿè½½ã€æ¯å¤„ç†å™¨ç»Ÿè®¡ã€æ—¶é’Ÿè®¡æ•°å™¨ |
| **å†…å­˜** | ç‰©ç†å†…å­˜ã€è™šæ‹Ÿå†…å­˜ã€äº¤æ¢åˆ†åŒº | å†…å­˜ä½¿ç”¨é‡ã€å¯ç”¨æ€§å’Œäº¤æ¢åˆ†åŒºç»Ÿè®¡ |
| **ç£ç›˜** | å­˜å‚¨ã€åˆ†åŒºã€ä½¿ç”¨ç‡ | ç£ç›˜é©±åŠ¨å™¨ã€åˆ†åŒºã€æ–‡ä»¶å­˜å‚¨ã€I/O ç»Ÿè®¡ |
| **ç½‘ç»œ** | æ¥å£ã€å¸¦å®½ | ç½‘ç»œæ¥å£ã€IP åœ°å€ã€æµé‡ç›‘æ§ |
| **è¿›ç¨‹** | åˆ—è¡¨ã€CPUã€å†…å­˜ | è¿›ç¨‹åˆ—è¡¨åŠæ¯è¿›ç¨‹ CPU å’Œå†…å­˜ä½¿ç”¨æƒ…å†µ |
| **ç¡¬ä»¶** | ä¼ æ„Ÿå™¨ã€ç”µæ± ã€æ˜¾ç¤ºå™¨ | æ¸©åº¦ã€é£æ‰‡ã€ç”µå‹ã€ç”µæ± çŠ¶æ€ã€æ˜¾ç¤ºå™¨ä¿¡æ¯ |
| **ç³»ç»Ÿ** | æ“ä½œç³»ç»Ÿã€å›ºä»¶ã€ä¸»æ¿ | æ“ä½œç³»ç»Ÿç‰ˆæœ¬ã€åˆ¶é€ å•†ã€å‹å·ã€åºåˆ—å· |

### ğŸ” é«˜çº§åŠŸèƒ½

* **å®æ—¶ç›‘æ§**: é€šè¿‡å¯é…ç½®çš„è½®è¯¢é—´éš”è·Ÿè¸ªç³»ç»ŸæŒ‡æ ‡
* **EDID è§£æ**: è¯¦ç»†çš„æ˜¾ç¤ºå™¨ä¿¡æ¯,åŒ…æ‹¬åˆ¶é€ å•†ã€å‹å·ã€åˆ†è¾¨ç‡
* **USB è®¾å¤‡æšä¸¾**: åˆ—å‡ºæ‰€æœ‰è¿æ¥çš„ USB è®¾å¤‡åŠå®Œæ•´è¯¦ç»†ä¿¡æ¯
* **æ–‡ä»¶ç³»ç»Ÿç›‘æ§**: æŒ‚è½½ç‚¹ã€æ–‡ä»¶ç±»å‹ã€ä½¿ç”¨ç»Ÿè®¡
* **ç½‘ç»œæµé‡**: å®æ—¶å¸¦å®½ç›‘æ§(RX/TX å­—èŠ‚æ•°å’ŒåŒ…æ•°)
* **ç”µæ± çŠ¶æ€**: å®¹é‡ã€å‰©ä½™æ—¶é—´ã€åŠŸè€—ã€ç”µå‹ã€æ¸©åº¦
* **ä¼ æ„Ÿå™¨æ•°æ®**: CPU æ¸©åº¦ã€é£æ‰‡è½¬é€Ÿã€ç”µå‹è¯»æ•°

### ğŸ›¡ï¸ ä¼ä¸šçº§ç‰¹æ€§

* **è½»é‡çº§**: æœ€å°å†…å­˜å ç”¨,ä½¿ç”¨ Memoizer æ¨¡å¼å®ç°å»¶è¿Ÿåˆå§‹åŒ–
* **çº¿ç¨‹å®‰å…¨**: æ‰€æœ‰æ“ä½œéƒ½æ˜¯çº¿ç¨‹å®‰å…¨çš„,æ”¯æŒå¹¶å‘è®¿é—®
* **çµæ´»æŸ¥è¯¢**: æŸ¥è¯¢ç‰¹å®šæŒ‡æ ‡æˆ–è·å–å®Œæ•´çš„ç³»ç»Ÿæ¦‚è§ˆ
* **æ ¼å¼åŒ–è¾“å‡º**: å†…ç½®æ ¼å¼åŒ–,æä¾›äººç±»å¯è¯»çš„æŒ‡æ ‡(KBã€MBã€GBã€TB)
* **è‡ªå®šä¹‰å¥åº·æ£€æŸ¥**: é€šè¿‡è‡ªå®šä¹‰å¥åº·æ£€æŸ¥è¿›è¡Œæ‰©å±•

-----

## ğŸš€ å¿«é€Ÿå¼€å§‹

### Maven ä¾èµ–

```xml
<dependency>
    <groupId>org.miaixz</groupId>
    <artifactId>bus-health</artifactId>
    <version>x.x.x</version>
</dependency>
```

### åŸºç¡€ç”¨æ³•

#### 1. è·å–ç³»ç»Ÿä¿¡æ¯

```java
import org.miaixz.bus.health.Provider;

public class HealthExample {
    public static void main(String[] args) {
        Provider provider = new Provider();

        // è·å–æ‰€æœ‰ç³»ç»Ÿä¿¡æ¯
        Map<String, Object> allInfo = provider.getAll();
        System.out.println(allInfo);

        // è·å–ç‰¹å®šä¿¡æ¯
        Map<String, Object> cpuInfo = provider.getSingle(TID.CPU);
        System.out.println(cpuInfo);
    }
}
```

#### 2. ç›‘æ§ CPU ä½¿ç”¨ç‡

```java
Provider provider = new Provider();

// è·å– CPU ä¿¡æ¯
Cpu cpu = provider.getCpu();
System.out.println("ç‰©ç†æ ¸å¿ƒæ•°: " + cpu.getPhysicalCores());
System.out.println("é€»è¾‘æ ¸å¿ƒæ•°: " + cpu.getLogicalCores());
System.out.println("æ€»ä½¿ç”¨ç‡: " + cpu.getTotalUsage() + "%");
System.out.println("ç”¨æˆ·ä½¿ç”¨ç‡: " + cpu.getUserUsage() + "%");
System.out.println("ç³»ç»Ÿä½¿ç”¨ç‡: " + cpu.getSystemUsage() + "%");
System.out.println("IO ç­‰å¾…: " + cpu.getIoWait() + "%");
```

#### 3. ç›‘æ§å†…å­˜ä½¿ç”¨ç‡

```java
Provider provider = new Provider();

// è·å–å†…å­˜ä¿¡æ¯
Memory memory = provider.getMemory();
System.out.println("æ€»å†…å­˜: " + memory.getTotal());
System.out.println("å·²ç”¨å†…å­˜: " + memory.getUsed());
System.out.println("ç©ºé—²å†…å­˜: " + memory.getFree());
System.out.println("ä½¿ç”¨ç‡: " + memory.getUsage() + "%");
```

#### 4. ç›‘æ§ç£ç›˜ä½¿ç”¨ç‡

```java
Provider provider = new Provider();

// è·å–ç£ç›˜ä¿¡æ¯
List<Disk> disks = provider.getDisk();
for (Disk disk : disks) {
    System.out.println("è®¾å¤‡: " + disk.getDeviceName());
    System.out.println("æŒ‚è½½ç‚¹: " + disk.getMountPoint());
    System.out.println("æ€»ç©ºé—´: " + provider.formatByte(disk.getTotalSpace()));
    System.out.println("å·²ç”¨ç©ºé—´: " + provider.formatByte(disk.getUsedSpace()));
    System.out.println("å¯ç”¨ç©ºé—´: " + provider.formatByte(disk.getFreeSpace()));
    System.out.println("ä½¿ç”¨ç‡: " + disk.getUsagePercent() + "%");
}
```

#### 5. ç›‘æ§ JVM ä¿¡æ¯

```java
Provider provider = new Provider();

// è·å– JVM ä¿¡æ¯
Jvm jvm = provider.getJvm();
System.out.println("JDK ç‰ˆæœ¬: " + jvm.getJdkVersion());
System.out.println("JDK ä¸»ç›®å½•: " + jvm.getJdkHome());
System.out.println("JVM åç§°: " + jvm.getJdkName());
System.out.println("æ€»å†…å­˜: " + provider.formatByte(jvm.getTotalMemory()));
System.out.println("æœ€å¤§å†…å­˜: " + provider.formatByte(jvm.getMaxMemory()));
System.out.println("ç©ºé—²å†…å­˜: " + provider.formatByte(jvm.getFreeMemory()));
System.out.println("ä½¿ç”¨ç‡: " + jvm.getUsagePercent() + "%");
System.out.println("å¯åŠ¨æ—¶é—´: " + jvm.getStartTime());
System.out.println("è¿è¡Œæ—¶é—´: " + jvm.getUptime() + "ms");
```

#### 6. ç›‘æ§è¿›ç¨‹

```java
Provider provider = new Provider();

// è·å– CPU ä½¿ç”¨ç‡å‰ 10 çš„è¿›ç¨‹
Map<String, Object> result = new HashMap<>();
provider.appendProcessList(10, TID.PROCESS, result);
List<Map<String, Object>> processes = (List<Map<String, Object>>) result.get(TID.PROCESS);

for (Map<String, Object> process : processes) {
    System.out.println("è¿›ç¨‹ ID: " + process.get("pid"));
    System.out.println("åç§°: " + process.get("name"));
    System.out.println("CPU: " + process.get(TID.CPU) + "%");
}
```

#### 7. è·å–ä¸»æœºä¿¡æ¯

```java
Provider provider = new Provider();

// è·å–ä¸»æœºä¿¡æ¯(åŒ…æ‹¬ç½‘ç»œç»Ÿè®¡)
Host host = provider.getHost();
System.out.println("ä¸»æœºå: " + host.getName());
System.out.println("IP åœ°å€: " + host.getIp());
System.out.println("æ“ä½œç³»ç»Ÿ: " + host.getOs());
System.out.println("æ“ä½œç³»ç»Ÿæ¶æ„: " + host.getOsArch());
System.out.println("ç”¨æˆ·ç›®å½•: " + host.getUserDir());
System.out.println("æ¥æ”¶å­—èŠ‚/ç§’: " + host.getRxBytesPerSecond() + "KB");
System.out.println("å‘é€å­—èŠ‚/ç§’: " + host.getTxBytesPerSecond() + "KB");
```

-----

## ğŸ“ é«˜çº§ç”¨æ³•

### 1. è®¿é—®ç¡¬ä»¶æŠ½è±¡å±‚

```java
Provider provider = new Provider();
HardwareAbstractionLayer hal = provider.getHardware();

// å¤„ç†å™¨ä¿¡æ¯
CentralProcessor processor = hal.getProcessor();
System.out.println("å¤„ç†å™¨æ ‡è¯†: " + processor.getProcessorIdentifier());
System.out.println("ç‰©ç†æ ¸å¿ƒæ•°: " + processor.getPhysicalProcessorCount());
System.out.println("é€»è¾‘æ ¸å¿ƒæ•°: " + processor.getLogicalProcessorCount());

// å†…å­˜ä¿¡æ¯
GlobalMemory globalMemory = hal.getMemory();
System.out.println("æ€»å†…å­˜: " + globalMemory.getTotal());

// ä¼ æ„Ÿå™¨
Sensors sensors = hal.getSensors();
System.out.println("CPU æ¸©åº¦: " + sensors.getCpuTemperature());
System.out.println("é£æ‰‡è½¬é€Ÿ: " + Arrays.toString(sensors.getFanSpeeds()));
System.out.println("CPU ç”µå‹: " + sensors.getCpuVoltage());

// ç”µæº
List<PowerSource> powerSources = hal.getPowerSources();
for (PowerSource ps : powerSources) {
    System.out.println("åç§°: " + ps.getName());
    System.out.println("å‰©ä½™å®¹é‡: " + ps.getRemainingCapacity() + "%");
    System.out.println("å‰©ä½™æ—¶é—´: " + ps.getTimeRemaining());
}

// ç½‘ç»œæ¥å£
List<NetworkIF> networkIFs = hal.getNetworkIFs();
for (NetworkIF net : networkIFs) {
    System.out.println("åç§°: " + net.getName());
    System.out.println("æ˜¾ç¤ºåç§°: " + net.getDisplayName());
    System.out.println("IPv4: " + Arrays.toString(net.getIPv4addr()));
}

// ç£ç›˜å­˜å‚¨
List<HWDiskStore> diskStores = hal.getDiskStores();
for (HWDiskStore disk : diskStores) {
    System.out.println("å‹å·: " + disk.getModel());
    System.out.println("åºåˆ—å·: " + disk.getSerial());
    System.out.println("å¤§å°: " + disk.getSize());
}

// æ˜¾ç¤ºå™¨
List<Display> displays = hal.getDisplays();
for (Display display : displays) {
    System.out.println("EDID: " + new String(display.getEdid()));
}
```

### 2. è®¿é—®æ“ä½œç³»ç»Ÿä¿¡æ¯

```java
Provider provider = new Provider();
OperatingSystem os = provider.getOperatingSystem();

// æ“ä½œç³»ç»Ÿä¿¡æ¯
System.out.println("ç³»åˆ—: " + os.getFamily());
System.out.println("åˆ¶é€ å•†: " + os.getManufacturer());
System.out.println("ç‰ˆæœ¬: " + os.getVersionInfo());

// è¿›ç¨‹
List<OSProcess> processes = os.getProcesses(null, OperatingSystem.ProcessSorting.CPU_DESC, 10);
for (OSProcess process : processes) {
    System.out.println("è¿›ç¨‹ ID: " + process.getProcessID());
    System.out.println("åç§°: " + process.getName());
    System.out.println("CPU è´Ÿè½½: " + process.getProcessCpuLoadCumulative());
    System.out.println("å†…å­˜: " + process.getResidentSetSize());
}

// æ–‡ä»¶ç³»ç»Ÿ
FileSystem fileSystem = os.getFileSystem();
Iterable<OSFileStore> fileStores = fileSystem.getFileStores();
for (OSFileStore fs : fileStores) {
    System.out.println("åç§°: " + fs.getName());
    System.out.println("æŒ‚è½½ç‚¹: " + fs.getMount());
    System.out.println("ç±»å‹: " + fs.getType());
    System.out.println("æ€»ç©ºé—´: " + fs.getTotalSpace());
}
```

### 3. è‡ªå®šä¹‰å¥åº·æ£€æŸ¥

```java
public class CustomHealthCheck {

    private final Provider provider = new Provider();

    public Map<String, Object> checkSystemHealth() {
        Map<String, Object> health = new HashMap<>();

        // CPU å¥åº·æ£€æŸ¥
        Cpu cpu = provider.getCpu();
        health.put("cpu_å¥åº·", cpu.getTotalUsage() < 80.0);
        health.put("cpu_ä½¿ç”¨ç‡", cpu.getTotalUsage());

        // å†…å­˜å¥åº·æ£€æŸ¥
        Memory memory = provider.getMemory();
        health.put("memory_å¥åº·", memory.getUsage() < 80.0);
        health.put("memory_ä½¿ç”¨ç‡", memory.getUsage());

        // ç£ç›˜å¥åº·æ£€æŸ¥
        List<Disk> disks = provider.getDisk();
        boolean diskHealthy = true;
        for (Disk disk : disks) {
            if (disk.getUsagePercent() > 80.0) {
                diskHealthy = false;
                break;
            }
        }
        health.put("disk_å¥åº·", diskHealthy);

        return health;
    }
}
```

### 4. å®šæ—¶ç›‘æ§

```java
import java.util.concurrent.Executors;
import java.util.concurrent.ScheduledExecutorService;
import java.util.concurrent.TimeUnit;

public class SystemMonitor {

    private final Provider provider = new Provider();
    private final ScheduledExecutorService scheduler =
        Executors.newScheduledThreadPool(1);

    public void startMonitoring() {
        scheduler.scheduleAtFixedRate(() -> {
            Cpu cpu = provider.getCpu();
            Memory memory = provider.getMemory();

            System.out.println("CPU ä½¿ç”¨ç‡: " + cpu.getTotalUsage() + "%");
            System.out.println("å†…å­˜ä½¿ç”¨ç‡: " + memory.getUsage() + "%");

            // å¦‚æœä½¿ç”¨ç‡é«˜åˆ™å‘å‡ºè­¦å‘Š
            if (cpu.getTotalUsage() > 80.0) {
                System.out.println("è­¦å‘Š: CPU ä½¿ç”¨ç‡è¿‡é«˜!");
            }
            if (memory.getUsage() > 80.0) {
                System.out.println("è­¦å‘Š: å†…å­˜ä½¿ç”¨ç‡è¿‡é«˜!");
            }
        }, 0, 5, TimeUnit.SECONDS);
    }

    public void stopMonitoring() {
        scheduler.shutdown();
    }
}
```

### 5. æŸ¥è¯¢å¤šä¸ªæŒ‡æ ‡

```java
Provider provider = new Provider();

// è·å–å¤šä¸ªç‰¹å®šæŒ‡æ ‡
List<String> metrics = Arrays.asList(
    TID.CPU,
    TID.MEMORY,
    TID.DISK,
    TID.JVM
);

Map<String, Object> result = provider.get(metrics);
result.forEach((key, value) -> System.out.println(key + ": " + value));
```

-----

## ğŸ“‹ ç±»å‹æ ‡è¯†ç¬¦å‚è€ƒ

### å¯ç”¨æŒ‡æ ‡ (TID)

| æ ‡è¯†ç¬¦ | æè¿° | è¿”å›ç±»å‹ |
| :--- | :--- | :--- |
| `TID.HOST` | ä¸»æœºä¿¡æ¯ | `Host` |
| `TID.CPU` | CPU ä½¿ç”¨ç‡å’Œç»Ÿè®¡ | `Cpu` |
| `TID.MEMORY` | å†…å­˜ä½¿ç”¨æƒ…å†µ | `Memory` |
| `TID.DISK` | ç£ç›˜å­˜å‚¨ä¿¡æ¯ | `List<Disk>` |
| `TID.JVM` | JVM è¿è¡Œæ—¶ä¿¡æ¯ | `Jvm` |
| `TID.ALL_DISK` | æ‰€æœ‰ç£ç›˜ä½¿ç”¨ç‡ç™¾åˆ†æ¯” | `Double` |
| `TID.PROCESS` | CPU ä½¿ç”¨ç‡æœ€é«˜çš„è¿›ç¨‹ | `List<Map<String, Object>>` |
| `TID.SYSTEM` | è®¡ç®—æœºç³»ç»Ÿä¿¡æ¯ | `ComputerSystem` |
| `TID.PROCESSOR` | å¤„ç†å™¨è¯¦æƒ… | `CentralProcessor` |
| `TID.HARDWARE` | æ‰€æœ‰ç¡¬ä»¶ä¿¡æ¯ | `Map<String, Object>` |
| `TID.POWERSOURCES` | ç”µæ± /ç”µæºä¿¡æ¯ | `Map<String, Object>` |
| `TID.NETWORKIFS` | ç½‘ç»œæ¥å£ä¿¡æ¯ | `Map<String, Object>` |

-----

## ğŸ’¡ æœ€ä½³å®è·µ

### 1. ä½¿ç”¨å•ä¾‹ Provider

```java
// âœ… æ¨è: é‡ç”¨ Provider å®ä¾‹
private static final Provider PROVIDER = new Provider();

public void checkHealth() {
    Cpu cpu = PROVIDER.getCpu();
    // ...
}

// âŒ ä¸æ¨è: æ¯æ¬¡éƒ½åˆ›å»ºæ–°å®ä¾‹
public void checkHealth() {
    Provider provider = new Provider(); // æµªè´¹èµ„æº
    // ...
}
```

### 2. å¤„ç†å¹³å°å·®å¼‚

```java
Provider provider = new Provider();
OS osType = (OS) provider.type();

switch (osType) {
    case WINDOWS:
        // Windows ç‰¹å®šé€»è¾‘
        break;
    case LINUX:
        // Linux ç‰¹å®šé€»è¾‘
        break;
    case MACOS:
        // macOS ç‰¹å®šé€»è¾‘
        break;
    default:
        // é»˜è®¤é€»è¾‘
}
```

### 3. ä»…ç›‘æ§ç‰¹å®šæŒ‡æ ‡

```java
// âœ… æ¨è: ä»…æŸ¥è¯¢æ‰€éœ€å†…å®¹
Map<String, Object> result = provider.getSingle(TID.CPU);

// âŒ ä¸æ¨è: åªéœ€ä¸€ä¸ªæŒ‡æ ‡å´æŸ¥è¯¢æ‰€æœ‰
Map<String, Object> result = provider.getAll(); // æµªè´¹èµ„æº
```

### 4. ä½¿ç”¨å®šæ—¶ç›‘æ§

```java
// âœ… æ¨è: ä½¿ç”¨å®šæ—¶æ‰§è¡Œå™¨è¿›è¡Œå‘¨æœŸæ€§æ£€æŸ¥
ScheduledExecutorService scheduler = Executors.newScheduledThreadPool(1);
scheduler.scheduleAtFixedRate(() -> {
    Cpu cpu = provider.getCpu();
    // æ ¹æ® cpu.getTotalUsage() è®°å½•æ—¥å¿—æˆ–å‘å‡ºè­¦å‘Š
}, 0, 5, TimeUnit.SECONDS);

// âŒ ä¸æ¨è: å¿™ç­‰å¾…
while (true) {
    Cpu cpu = provider.getCpu();
    Thread.sleep(5000); // é˜»å¡çº¿ç¨‹
}
```

### 5. ä¼˜é›…åœ°å¤„ç†å¼‚å¸¸

```java
public Map<String, Object> safeGetCpu() {
    try {
        Cpu cpu = provider.getCpu();
        return Map.of("cpu", cpu);
    } catch (Exception e) {
        Logger.error("è·å– CPU ä¿¡æ¯å¤±è´¥", e);
        return Map.of("cpu", null, "error", e.getMessage());
    }
}
```

-----

## â“ å¸¸è§é—®é¢˜

### Q1: å¦‚ä½•è·å–å®æ—¶ CPU ä½¿ç”¨ç‡?

**A**: ä½¿ç”¨ `getCpu()` æ–¹æ³•,å®ƒä¼šè®¡ç®— 600 æ¯«ç§’é—´éš”å†…çš„ä½¿ç”¨ç‡:

```java
Cpu cpu = provider.getCpu();
double totalUsage = cpu.getTotalUsage();
```

### Q2: å¯ä»¥ç›‘æ§è¿œç¨‹ç³»ç»Ÿå—?

**A**: Bus Health ç›‘æ§æœ¬åœ°ç³»ç»Ÿã€‚å¯¹äºè¿œç¨‹ç›‘æ§,å¯ä»¥è€ƒè™‘:
- é€šè¿‡ HTTP API æš´éœ²å¥åº·æ£€æŸ¥ç«¯ç‚¹
- ä½¿ç”¨ç›‘æ§ä»£ç†å°†æŒ‡æ ‡æ¨é€åˆ°ä¸­å¿ƒæœåŠ¡å™¨
- é›†æˆ Prometheus ç­‰ç›‘æ§ç³»ç»Ÿ

### Q3: å¦‚ä½•åœ¨æœåŠ¡å™¨ä¸Šè·å–ç”µæ± ä¿¡æ¯?

**A**: ä½¿ç”¨ `getPowerSourceInfo()` æ–¹æ³•:

```java
Map<String, Object> powerInfo = provider.getPowerSourceInfo();
List<PowerSource> powerSources = provider.getHardware().getPowerSources();

for (PowerSource ps : powerSources) {
    if (!ps.isPowerOnLine()) {
        System.out.println("ä½¿ç”¨ç”µæ± : " + ps.getRemainingCapacity() + "%");
    }
}
```

### Q4: éœ€è¦ä»€ä¹ˆæƒé™?

**A**:
- **Linux/Unix**: å¤§éƒ¨åˆ†ä¿¡æ¯æ— éœ€ç‰¹æ®Šæƒé™
- **Windows**: é€šå¸¸æ— éœ€ç‰¹æ®Šæƒé™
- **æŸäº›ä¼ æ„Ÿå™¨**: å¯èƒ½éœ€è¦æ ¹æ®æ“ä½œç³»ç»Ÿæå‡æƒé™

### Q5: å¦‚ä½•å‡å°‘ç›‘æ§å¼€é”€?

**A**:
- ä»…æŸ¥è¯¢å¿…è¦çš„æŒ‡æ ‡
- å¢åŠ ç›‘æ§é—´éš”(ä¾‹å¦‚,5-10 ç§’è€Œä¸æ˜¯ 1 ç§’)
- ä½¿ç”¨å•ä¾‹ Provider å®ä¾‹
- é€‚å½“ç¼“å­˜ç»“æœ

### Q6: å¯ä»¥ä¸ Spring Boot Actuator é›†æˆå—?

**A**: å¯ä»¥,åˆ›å»ºè‡ªå®šä¹‰å¥åº·æŒ‡ç¤ºå™¨:

```java
@Component
public class SystemHealthIndicator implements HealthIndicator {

    private final Provider provider = new Provider();

    @Override
    public Health health() {
        Cpu cpu = provider.getCpu();
        Memory memory = provider.getMemory();

        if (cpu.getTotalUsage() > 90.0 || memory.getUsage() > 90.0) {
            return Health.down()
                .withDetail("cpu", cpu.getTotalUsage())
                .withDetail("memory", memory.getUsage())
                .build();
        }

        return Health.up()
            .withDetail("cpu", cpu.getTotalUsage())
            .withDetail("memory", memory.getUsage())
            .build();
    }
}
```

### Q7: å¦‚ä½•è·å–ç½‘ç»œæµé‡ç»Ÿè®¡?

**A**: ç½‘ç»œç»Ÿè®¡åœ¨ `getHost()` ä¸­é€šè¿‡ 3 ç§’é—´éš”è®¡ç®—:

```java
Host host = provider.getHost();
System.out.println("æ¥æ”¶: " + host.getRxBytesPerSecond() + " KB/s");
System.out.println("å‘é€: " + host.getTxBytesPerSecond() + " KB/s");
```

### Q8: æ˜¯å¦çº¿ç¨‹å®‰å…¨?

**A**: æ˜¯çš„,Provider æ˜¯çº¿ç¨‹å®‰å…¨çš„,å¯ä»¥åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸­å®‰å…¨ä½¿ç”¨ã€‚

-----

## ğŸ”„ ç‰ˆæœ¬å…¼å®¹æ€§

| Bus Health ç‰ˆæœ¬ | JDK ç‰ˆæœ¬ | OSHI ç‰ˆæœ¬ |
| :--- | :--- | :--- |
| 8.x | 17+ | 6.x+ |
| 7.x | 11+ | 5.x+ |

-----

## ğŸš€ æ€§èƒ½è€ƒè™‘

### 1. åˆå§‹åŒ–å¼€é”€

- é¦–æ¬¡è®¿é—®æ¯ä¸ªå¹³å°ç»„ä»¶(OSã€Hardware)æ¶‰åŠå»¶è¿Ÿåˆå§‹åŒ–
- åç»­è®¿é—®ä½¿ç”¨ç¼“å­˜å®ä¾‹(Memoizer æ¨¡å¼)
- å…¸å‹åˆå§‹åŒ–æ—¶é—´: 50-200ms(å–å†³äºå¹³å°)

### 2. æŸ¥è¯¢æ€§èƒ½

| æ“ä½œ | å…¸å‹æ—¶é—´ | è¯´æ˜ |
| :--- | :--- | :--- |
| `getCpu()` | 600ms | åŒ…å«æµ‹é‡é—´éš” |
| `getMemory()` | <10ms | ç¼“å­˜æ•°æ® |
| `getDisk()` | 20-50ms | æ–‡ä»¶ç³»ç»ŸæŸ¥è¯¢ |
| `getJvm()` | <5ms | JVM MXBean è®¿é—® |
| `getHost()` | 3000ms | åŒ…å«ç½‘ç»œæµ‹é‡ |

### 3. å†…å­˜å ç”¨

- Provider å®ä¾‹: ~1KB
- ç¼“å­˜çš„å¹³å°å®ä¾‹: ~50-100KB
- æŸ¥è¯¢ç»“æœ: æ ¹æ®æ•°æ®é‡å˜åŒ–

### 4. ä¼˜åŒ–å»ºè®®

```java
// å¦‚æœéœ€è¦é¢‘ç¹è½®è¯¢,ç¼“å­˜ç»“æœ
private Cpu cachedCpu;
private long lastCpuUpdate = 0;

public Cpu getCpuWithCache() {
    long now = System.currentTimeMillis();
    if (now - lastCpuUpdate > 5000) { // 5 ç§’ç¼“å­˜
        cachedCpu = provider.getCpu();
        lastCpuUpdate = now;
    }
    return cachedCpu;
}
```

-----

## ğŸ“Š æ”¯æŒçš„å¹³å°

### æ“ä½œç³»ç»Ÿ

| å¹³å° | çŠ¶æ€ | è¯´æ˜ |
| :--- | :--- | :--- |
| **Windows** | âœ… å®Œå…¨æ”¯æŒ | Windows 7/8/10/11, Server 2012+ |
| **Linux** | âœ… å®Œå…¨æ”¯æŒ | æ‰€æœ‰ä¸»æµå‘è¡Œç‰ˆ |
| **macOS** | âœ… å®Œå…¨æ”¯æŒ | macOS 10.12+ |
| **FreeBSD** | âœ… æ”¯æŒ | FreeBSD 10+ |
| **OpenBSD** | âœ… æ”¯æŒ | OpenBSD 6+ |
| **Solaris** | âœ… æ”¯æŒ | Solaris 10+ |
| **AIX** | âœ… æ”¯æŒ | AIX 6+ |

### ç¡¬ä»¶ä¿¡æ¯

| ç±»åˆ« | Windows | Linux | macOS | Unix |
| :--- | :--- | :--- | :--- | :--- |
| **CPU** | âœ… | âœ… | âœ… | âœ… |
| **å†…å­˜** | âœ… | âœ… | âœ… | âœ… |
| **ç£ç›˜** | âœ… | âœ… | âœ… | âœ… |
| **ç½‘ç»œ** | âœ… | âœ… | âœ… | âœ… |
| **ç”µæ± ** | âœ… | âœ… | âœ… | âš ï¸ |
| **ä¼ æ„Ÿå™¨** | âœ… | âš ï¸ | âœ… | âš ï¸ |
| **æ˜¾ç¤ºå™¨** | âœ… | âš ï¸ | âœ… | âŒ |
| **USB** | âœ… | âœ… | âœ… | âš ï¸ |

å›¾ä¾‹: âœ… å®Œå…¨æ”¯æŒ | âš ï¸ éƒ¨åˆ†æ”¯æŒ | âŒ ä¸æ”¯æŒ

-----

## ğŸ”§ é…ç½®ç¤ºä¾‹

### Maven é…ç½®

```xml
<dependency>
    <groupId>org.miaixz</groupId>
    <artifactId>bus-health</artifactId>
    <version>8.5.0</version>
</dependency>

<!-- å¯é€‰: æ›´å¥½çš„æœ¬åœ°åº“æ”¯æŒ -->
<dependency>
    <groupId>net.java.dev.jna</groupId>
    <artifactId>jna-platform</artifactId>
    <version>5.18.0</version>
</dependency>
```

### Gradle é…ç½®

```groovy
implementation 'org.miaixz:bus-health:8.5.0'

// å¯é€‰: æ›´å¥½çš„æœ¬åœ°åº“æ”¯æŒ
implementation 'net.java.dev.jna:jna-platform:5.18.0'
```

-----

## ğŸ“š æ›´å¤šèµ„æº

- **æ–‡æ¡£**: [https://www.miaixz.org](https://www.miaixz.org)
- **GitHub ä»“åº“**: [https://github.com/818000/bus](https://github.com/818000/bus)
- **é—®é¢˜è·Ÿè¸ª**: [https://github.com/818000/bus/issues](https://github.com/818000/bus/issues)
- **OSHI é¡¹ç›®**: [https://github.com/oshi/oshi](https://github.com/oshi/oshi)

-----

## ğŸ™ è‡´è°¢

æœ¬é¡¹ç›®éƒ¨åˆ†åŸºäº [OSHI](https://github.com/oshi/oshi)(Operating System and Hardware Information),é‡‡ç”¨ MIT è®¸å¯è¯ã€‚æ„Ÿè°¢ OSHI å›¢é˜Ÿçš„æ°å‡ºå·¥ä½œã€‚

-----

**ç”± Miaixz å›¢é˜Ÿç”¨ â¤ï¸ æ„å»º**
